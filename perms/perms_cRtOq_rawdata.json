{
  "name": "perms",
  "permissions": "NONE",
  "restriction": "1",
  "_id": "cRtOq",
  "actions": [
    {
      "behavior": "1",
      "interpretation": "1",
      "code": "const {\n    stripIndents\n} = this.getWrexMods()\n    .require('common-tags');\n\nconst prefix = (msg.content.startsWith(String(me))) ? String(me) : (server && server.tag) || Files.data.settings.tag;\nconst text = msg.content.slice(prefix.length)\n    .trim()\n    .split(/ +/g);\ntext.shift();\nconst mem = text.join(' ');\n\n(async () => {\n  let infoMem;\n    const server = msg.guild;\n\n    if (!mem) {\n      infoMem = msg.member;\n    } else {\n      infoMem = msg.mentions.members.first() || server.members.cache.find(m => m.id === `${mem}`) || server.members.cache.find(m => m.displayName.toUpperCase() === `${mem.toUpperCase()}`) || server.members.cache.find(m => m.user.username.toUpperCase() === `${mem.toUpperCase()}`) || server.members.cache.find(m => m.user.username.toLowerCase()\n        .includes(`${mem.toLowerCase()}`));\n    }\n    if (!infoMem) {\n      return msg.channel.send('That user was not found, please try again.');\n    }\n\n    const yes = '<:approved:622961998807826432>';\n    const no = '<:denied:622961970093752320>';\n\n    if (infoMem.hasPermission('ADMINISTRATOR')) {\n      const embed = new DiscordJS.MessageEmbed();\n      embed.setColor('#2BFED5');\n      embed.setAuthor(infoMem.displayName, infoMem.user.displayAvatarURL());\n      embed.setFooter(`Requested by: ${msg.member.displayName}`);\n      embed.setTimestamp();\n\n      // General Perms\n      embed.addField('➢ __General Permissions:__', stripIndents`\n  \\`Administrator\\`| ${yes}\n  `, true);\n\n      return msg.channel.send(embed);\n    }\n    // Non admin perms:\n    const embed = new DiscordJS.MessageEmbed();\n    embed.setColor('#2BFED5');\n    embed.setAuthor(infoMem.displayName, infoMem.user.displayAvatarURL());\n    embed.setFooter(`Requested by: ${msg.member.displayName}`);\n    embed.setTimestamp();\n\n    // General Perms\n    embed.addField('➢ __General Permissions:__', stripIndents`\n  \\`Administrator\\`| ${no}\n  \\`View Audit Logs\\`| ${(infoMem.hasPermission('VIEW_AUDIT_LOG') ? yes : no)}\n  \\`Manage Server\\`| ${(infoMem.hasPermission('MANAGE_GUILD') ? yes : no)}\n  \\`Manage Roles\\`| ${(infoMem.hasPermission('MANAGE_ROLES') ? yes : no)}\n  \\`Manage Channels\\`| ${(infoMem.hasPermission('MANAGE_CHANNELS') ? yes : no)}\n  \\`Kick Members\\`| ${(infoMem.hasPermission('KICK_MEMBERS') ? yes : no)}\n  \\`Ban Members\\`| ${(infoMem.hasPermission('BAN_MEMBERS') ? yes : no)}\n  \\`Create Invite\\`| ${(infoMem.hasPermission('CREATE_INSTANT_INVITE') ? yes : no)}\n  \\`Change Nickname\\`| ${(infoMem.hasPermission('CHANGE_NICKNAME') ? yes : no)}\n  \\`Manage Nicknames\\`| ${(infoMem.hasPermission('MANAGE_NICKNAMES') ? yes : no)}\n  \\`Manage Emojis\\`| ${(infoMem.hasPermission('MANAGE_EMOJIS') ? yes : no)}\n  \\`Manage Webhooks\\` ${(infoMem.hasPermission('MANAGE_WEBHOOKS') ? yes : no)}\n  \\`View Guild Insights\\` ${infoMem.hasPermission('VIEW_GUILD_INSIGHTS') ? yes : no}\n  `, true);\n\n    // Text Perms\n    embed.addField('➢ __Text Permissions:__', stripIndents`\n  \\`Read Messages\\`| ${(infoMem.permissions.has(1024) ? yes : no)}\n  \\`Send Messages\\`| ${(infoMem.hasPermission('SEND_MESSAGES') ? yes : no)}\n  \\`Send TTS Messages\\`| ${(infoMem.hasPermission('SEND_TTS_MESSAGES') ? yes : no)}\n  \\`Manage Messages\\`| ${(infoMem.hasPermission('MANAGE_MESSAGES') ? yes : no)}\n  \\`Embed Links\\`| ${(infoMem.hasPermission('EMBED_LINKS') ? yes : no)}\n  \\`Attach Files\\`| ${(infoMem.hasPermission('ATTACH_FILES') ? yes : no)}\n  \\`Read Message History\\`| ${(infoMem.hasPermission('READ_MESSAGE_HISTORY') ? yes : no)}\n  \\`Mention Everyone\\`| ${(infoMem.hasPermission('MENTION_EVERYONE') ? yes : no)}\n  \\`Use External Emojis\\`| ${(infoMem.hasPermission('USE_EXTERNAL_EMOJIS') ? yes : no)}\n  \\`Add Reactions\\`| ${(infoMem.hasPermission('ADD_REACTIONS') ? yes : no)}\n  `, true);\n\n    // Voice Perms\n    embed.addField('➢ __Voice Permissions:__', stripIndents`\n  \\`Connect\\`| ${(infoMem.hasPermission('CONNECT') ? yes : no)}\n  \\`Speak\\`| ${(infoMem.hasPermission('SPEAK') ? yes : no)}\n  \\`Mute Members\\`| ${(infoMem.hasPermission('MUTE_MEMBERS') ? yes : no)}\n  \\`Deafen Members\\`| ${(infoMem.hasPermission('DEAFEN_MEMBERS') ? yes : no)}\n  \\`Move Members\\`| ${(infoMem.hasPermission('MOVE_MEMBERS') ? yes : no)}\n  \\`Use Voice Activity\\`| ${(infoMem.hasPermission('USE_VAD') ? yes : no)}\n  \\`Priority Speaker\\`| ${(infoMem.hasPermission('PRIORITY_SPEAKER') ? yes : no)}\n  `, true);\n\n    return msg.channel.send(embed);\n})()",
      "storage": "0",
      "varName": "",
      "name": "Run Script"
    }
  ]
}
